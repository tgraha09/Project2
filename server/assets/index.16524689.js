var T=Object.defineProperty,L=Object.defineProperties;var I=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var b=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var f=(i,e,s)=>e in i?T(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s,w=(i,e)=>{for(var s in e||(e={}))b.call(e,s)&&f(i,s,e[s]);if(m)for(var s of m(e))R.call(e,s)&&f(i,s,e[s]);return i},x=(i,e)=>L(i,I(e));var C=(i,e)=>{var s={};for(var n in i)b.call(i,n)&&e.indexOf(n)<0&&(s[n]=i[n]);if(i!=null&&m)for(var n of m(i))e.indexOf(n)<0&&R.call(i,n)&&(s[n]=i[n]);return s};var S=(i,e,s)=>(f(i,typeof e!="symbol"?e+"":e,s),s);import{j as v,P as F,$ as d,R as p,a as P,B as j,S as O,b as u}from"./vendor.57c8bb31.js";const W=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=s(a);fetch(a.href,r)}};W();const t=v.exports.jsx,l=v.exports.jsxs,g=v.exports.Fragment,y=s=>{var n=s,{backgroundColor:i}=n,e=C(n,["backgroundColor"]);return t("main",x(w({className:"main",style:i&&{backgroundColor:i}},e),{children:t("section",{className:"main-inner",children:e.children})}))};y.propTypes={backgroundColor:F.string,content:F.string.isRequired};y.defaultProps={backgroundColor:"rgb(25, 25, 51)",content:"Display"};const N=function(e,s,n,a){d.ajax({cache:!1,type:e,url:s,data:n,dataType:"json",success:a,error:function(o){console.log("Error");const h=JSON.parse(o.responseText);console.log(h.error)}})},$=(i,e)=>{let s;const n=setInterval(()=>{s=window.sessionStorage.getItem(i),s!==""&&s!==null&&(s=e(s),clearInterval(n))},200)},A=(i,e)=>{let s;const n=setInterval(()=>(s=window.localStorage.getItem(i),s!==""&&s!==null&&(s=e(s),clearInterval(n)),s),200);return s};class q extends p.Component{constructor(e){super(e);console.log("SignupWindow"),this.state={username:"",pass:"",pass2:""},this.handleChange=this.handleChange.bind(this),this.handleSignup=this.handleSignup.bind(this)}handleChange(e){this.setState({[e.target.name]:e.target.value})}checkFields(){return!(this.state.username==""||this.state.pass==""||this.state.pass2=="")}checkPasswords(){return this.state.pass==this.state.pass2}createQuery(){const e=s=>encodeURIComponent(s.toString().trim());return`username=${e(this.state.username)}&pass=${e(this.state.pass)}&pass2=${e(this.state.pass2)}`}handleSignup(e){if(e.preventDefault(),!this.checkFields())return alert("RAWR! All fields are required!"),!1;if(!this.checkPasswords())return alert("RAWR! Passwords do not match!"),!1;const s="POST",n=document.querySelector("#signupForm").getAttribute("action"),a=this.createQuery();return console.log(a),N(s,n,a,()=>{window.location="/login"}),!1}render(){return l(g,{children:[t("h1",{className:"title",children:"Recipe Finder"}),l("nav",{className:"nav",children:[t("div",{className:"linkWrap",children:t("a",{className:"link",id:"login",href:"/login",children:"Login"})}),t("div",{className:"linkWrap",children:t("a",{className:"link",id:"signup",href:"/signup",children:"Signup"})})]}),t("h3",{className:"desc",children:"Search a recipe by its food and cuisine tag."}),t("div",{className:"content",children:l("form",{id:"signupForm",name:"signupForm",onSubmit:this.handleSignup,action:"/signup",method:"POST",className:"mainForm",children:[t("label",{htmlFor:"username",children:"Username: "}),t("input",{id:"user",type:"text",name:"username",placeholder:"username",value:this.state.username,onChange:this.handleChange}),t("label",{htmlFor:"pass",children:"Password: "}),t("input",{id:"pass",type:"password",name:"pass",placeholder:"password",value:this.state.pass,onChange:this.handleChange}),t("label",{htmlFor:"pass2",children:"Password: "}),t("input",{id:"pass2",type:"password",name:"pass2",placeholder:"retype password",value:this.state.pass2,onChange:this.handleChange}),t("input",{className:"formSubmit",type:"submit",value:"Sign up"})]})})]})}}class k extends p.Component{constructor(e){super(e);console.log("LoginWindow"),this.state={username:"",pass:""},this.handleChange=this.handleChange.bind(this),this.handleLogin=this.handleLogin.bind(this)}handleChange(e){this.setState({[e.target.name]:e.target.value})}checkFields(){return!(this.state.username==""||this.state.pass=="")}createQuery(){const e=s=>encodeURIComponent(s.toString().trim());return`username=${e(this.state.username)}&pass=${e(this.state.pass)}`}handleLogin(e){if(e.preventDefault(),!this.checkFields())return alert("RAWR! Username or password is empty"),!1;const s="POST",n=document.querySelector("#loginForm").getAttribute("action"),a=this.createQuery();return console.log(a),N(s,n,a,()=>{window.location="/finder"}),!1}render(){return l(g,{children:[t("h1",{className:"title",children:"Recipe Finder"}),l("nav",{className:"nav",children:[t("div",{className:"linkWrap",children:t("a",{className:"link",id:"login",href:"/login",children:"Login"})}),t("div",{className:"linkWrap",children:t("a",{className:"link",id:"signup",href:"/signup",children:"Signup"})})]}),t("h3",{className:"desc",children:"Search a recipe by its food and cuisine tag."}),t("div",{className:"content",children:l("form",{id:"loginForm",name:"loginForm",onSubmit:this.handleLogin,action:"/login",method:"POST",className:"mainForm",children:[t("label",{htmlFor:"username",children:"Username: "}),t("input",{id:"user",type:"text",name:"username",placeholder:"username",value:this.state.username,onChange:this.handleChange}),t("label",{htmlFor:"pass",children:"Password: "}),t("input",{id:"pass",type:"password",name:"pass",placeholder:"password",value:this.state.pass,onChange:this.handleChange}),t("input",{className:"formSubmit",type:"submit",value:"Sign in"})]})})]})}}class E extends p.Component{constructor(e){super(e);S(this,"search",e=>{let s=d(".tagInput"),a=d("#food").val(),r=s.val()||"american";sessionStorage.setItem("food",a),sessionStorage.setItem("tag",r);const o=searchform.getAttribute("action"),h=searchform.getAttribute("method");let c=o+`?&food=${a}&tag=${r}`;console.log(c),N(h,"/recipes-json",c,()=>{console.log({data:c}),console.log(`Send to ${o}`)}),setTimeout(()=>{window.location=`/recipes?&food=${a}&tag=${r}`},2e3)});console.log("Finder"),this.init()}init(){sessionStorage.removeItem("results"),(sessionStorage.getItem("tagsList")===null||sessionStorage.getItem("tagsList")==="")&&(console.log("Getting Tags"),this.getTags()),A("tagsList",e=>{let s=d("#recipeTags"),n=d("#tagInput");n.textContent="ok",n.recipeTags=[],d("#food"),d("#searchform"),JSON.parse(e).results.forEach(r=>{let o=r.name,h=r.display_name,c=document.createElement("option");c.id="tag",n.recipeTags[h]={tag:o,option:c},c.value=o,c.text=h,s.append(c)})})}getTags(){const e=null,s=new XMLHttpRequest;s.withCredentials=!1,s.addEventListener("readystatechange",function(){this.readyState===this.DONE&&sessionStorage.setItem("tagsList",this.responseText)}),s.open("GET","https://tasty.p.rapidapi.com/tags/list"),s.setRequestHeader("x-rapidapi-host","tasty.p.rapidapi.com"),s.setRequestHeader("x-rapidapi-key","170e038a70mshc48a677384b7b29p120f51jsn123cfd31d18c"),s.send(e)}render(){return l(g,{children:[t("h1",{className:"title",children:"Recipe Finder"}),l("nav",{className:"nav",children:[t("div",{className:"linkWrap",children:t("a",{className:"link",id:"logout",href:"/logout",children:"Logout"})}),t("div",{className:"linkWrap",children:t("a",{className:"link",id:"logout",href:"#",children:"Recipe Client"})})]}),t("h3",{className:"desc",children:"Search a recipe by its food and cuisine tag."}),t("div",{className:"content",children:t("form",{className:"mainForm",id:"searchform",method:"POST",action:"/recipes-json",children:l("div",{id:"formwrap",children:[l("div",{id:"foodWrap",children:[t("label",{htmlFor:"food",children:"Pick Food"}),t("br",{}),t("input",{className:"input",type:"text",id:"food",name:"food",defaultValue:"Chicken"}),t("br",{})]}),l("div",{id:"tagWrap",children:[t("label",{htmlFor:"tag",children:"Select Tag"}),t("br",{}),t("input",{className:"input",id:"tagInput",type:"text",name:"tag",list:"recipeTags"}),t("datalist",{name:"recipeTags",id:"recipeTags",children:t("option",{id:"tag"})})]}),t("input",{id:"submitbtn",type:"submit",onClick:e=>{e.preventDefault(),this.search(e)},onChange:()=>{console.log("Changed")}})]})})})]})}}class D extends p.Component{constructor(e){super(e);S(this,"handleResponse",(e,s,n)=>{console.log(e.target.response);let a=JSON.parse(e.target.response);console.log(a),sessionStorage.setItem("results",JSON.stringify(a))});console.log("Search"),this.init()}init(){(sessionStorage.getItem("results")===null||sessionStorage.getItem("results")==="")&&this.downloadRecipes(),$("results",e=>{this.displayRecipies(JSON.parse(e))})}downloadRecipes(){let e=new URL(document.location).searchParams,s=e.get("food"),n=e.get("tag");const a=`/recipes-json?food=${s}&tag=${n}`,r=new XMLHttpRequest;r.onload=o=>this.handleResponse(o,s,n),r.open("GET",a),r.setRequestHeader("Accept","application/javascript"),r.send()}render(){return l(g,{children:[t("h1",{className:"title",children:"Search Results"}),l("nav",{className:"nav",children:[t("div",{className:"linkWrap",children:t("a",{className:"link",id:"logout",href:"/logout",children:"Logout"})}),t("div",{className:"linkWrap",children:t("a",{className:"link",id:"logout",href:"#",children:"Recipe Client"})})]}),t("h3",{className:"desc",children:"Results"}),t("div",{className:"content",children:t("div",{id:"content"})})]})}displayRecipies(e){var a;console.log("Parsing Recipies");let s=document.querySelector("#content"),n=e.result;(a=n==null?void 0:n.results)==null||a.forEach(r=>{let o=document.createElement("recipe");o.innerHTML=`<img id="thumb" src=${r.thumbnail}> </img>
          <a href="javascript:void(0)" recipe="${r.id}" onclick="loadRecipe(this)">${r.name}</a>`,s.append(o)})}}class J extends p.Component{constructor(e){super(e);console.log(e.csrf),this.state={csrf:e.csrf}}render(){}}const M=i=>{P.render(t(p.StrictMode,{children:t(y,{children:t(j,{children:l(O,{children:[t(u,{exact:!0,path:"/",children:t(k,{})}),t(u,{exact:!0,path:"/login",children:t(k,{})}),t(u,{exact:!0,path:"/signup",children:t(q,{})}),t(u,{exact:!0,path:"/finder",children:t(E,{})}),t(u,{exact:!0,path:"/recipes",children:t(D,{})})]})})})}),document.getElementById("root"))};M();
